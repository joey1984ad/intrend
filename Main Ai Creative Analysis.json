{
    "name": "AI Creative Analysis - Compatible",
    "nodes": [
      {
        "parameters": {
          "httpMethod": "POST",
          "path": "analyze-creatives",
          "responseMode": "responseNode"
        },
        "id": "webhook-trigger",
        "name": "Webhook Trigger",
        "type": "n8n-nodes-base.webhook",
        "typeVersion": 1,
        "position": [240, 640]
      },
      {
        "parameters": {
          "jsCode": "// Validate incoming webhook data\nconst webhookData = $json;\nconst sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n// Check required fields - all are mandatory\nif (!webhookData.accessToken) {\n  throw new Error('Missing access token');\n}\n\nif (!webhookData.creativeId) {\n  throw new Error('Missing creative ID');\n}\n\nif (!webhookData.adAccountId) {\n  throw new Error('Missing ad account ID');\n}\n\n// Add session tracking\nreturn {\n  ...webhookData,\n  sessionId: sessionId,\n  workflowVersion: '2.0',\n  receivedAt: new Date().toISOString()\n};"
        },
        "id": "validate-data",
        "name": "Validate Data",
        "type": "n8n-nodes-base.code",
        "typeVersion": 1,
        "position": [460, 640]
      },
      {
        "parameters": {
          "url": "http://localhost:3000/api/analyze-creatives",
          "method": "POST",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "Content-Type",
                "value": "application/json"
              }
            ]
          },
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "={{ JSON.stringify($json) }}"
        },
        "id": "api-call",
        "name": "Call API",
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 3,
        "position": [680, 640]
      },
      {
        "parameters": {
          "jsCode": "// Process API response\nconst data = $json;\nconst sessionId = data?.sessionId || 'unknown';\n\nif (data && data.success) {\n  console.log(`Success: Score ${data.score}/10`);\n  return data;\n} else {\n  return {\n    success: false,\n    error: data?.error || 'API call failed',\n    sessionId: sessionId,\n    timestamp: new Date().toISOString()\n  };\n}"
        },
        "id": "process-response",
        "name": "Process Response",
        "type": "n8n-nodes-base.code",
        "typeVersion": 1,
        "position": [900, 640]
      },
      {
        "parameters": {
          "respondWith": "json",
          "responseBody": "={{ JSON.stringify($json) }}"
        },
        "id": "webhook-response",
        "name": "Webhook Response",
        "type": "n8n-nodes-base.respondToWebhook",
        "typeVersion": 1,
        "position": [1120, 640]
      }
    ],
    "connections": {
      "Webhook Trigger": {
        "main": [[{"node": "Validate Data", "type": "main", "index": 0}]]
      },
      "Validate Data": {
        "main": [[{"node": "Call API", "type": "main", "index": 0}]]
      },
      "Call API": {
        "main": [[{"node": "Process Response", "type": "main", "index": 0}]]
      },
      "Process Response": {
        "main": [[{"node": "Webhook Response", "type": "main", "index": 0}]]
      }
    },
    "active": false,
    "settings": {
      "executionOrder": "v1"
    }
  }